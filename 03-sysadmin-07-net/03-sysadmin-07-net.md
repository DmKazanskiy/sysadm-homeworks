# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
> LINUX: `ifconfig`, `ip`;
> WINDOWS: `ipconfig`

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?
> NDP - Neighbor Discovery Protocol
> `arp`, `arp-scan`, `nmap` - поиск соседей

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.
> Для разделения L2 коммутатора на сети можно воспользоваться технологией VLAN - разделение пакетов с помощью `меток в кадре` (0..4095). Для этого на портах L2-коммутатора указывают в каком VLAN он работает и проходящий траффик помечается меткой 
> Пакеты для настройки `VLAN`: {`vlan`, `vconfig`} depecated;  `ip`,`ifconfig`
> Пример списка команд для настройки VLAN:

```bash
sudo modprobe --first-time 8021q
## 
sudo vconfig add enp7s0f0 4095
sudo ifconfig enp7s0f0.4095 192.168.1.100 netmask 255.255.255.0 broadcast 192.168.1.255 up
## или:
sudo ip link add link enp7s0f0 name enp7s0f0.4095 type vlan id 4095
sudo ip addr add 192.168.1.100/24 brd 192.168.1.255 dev enp7s0f0.4095
sudo ip link set dev enp7s0f0.4095 up

```
> После перезагрузки интерфейс `enp7s0f0.4095` будет удален 
>
> Настройку конфигурации VLAN можно выполнять с помощью `ifconfig` или `netplan`
>
> Пример конфига `ifconfig`:

```bash
#sudo nano #/etc/network/interfaces 

auto enp1s0.100
iface enp7sf0.4095 inet static
  address 192.168.1.100
  netmask 255.255.255.0
  vlan-raw-device enp7sf0.4095

```

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

> mode=0(balance-rr) - режим по умолчанию, пакеты распределяются по принципу RoundRobbin;
> mode=1(active-backup) - один активный, остальные подхватывают, если на активном проблемы;
> mode=2(balance-xor) - распределение входящего / исходящего трафика между интерфейсами;
> mode=3(broadcast) – пакеты передаются во все объединенные интерфейсы;
> mode=4(802.3ad) – динамическое объединение одинаковых портов;
> mode=5(balance-tlb), mode=6(balance-alb) - распределение нагрузки адаптивное.
> 
> Пример конфига с помощью  `/etc/network/interfaces`
```bash

iface bond0 inet static
  address 10.0.1.5
  netmask 255.255.255.0
  network 10.0.1.0
  gateway 10.0.1.254
  dns-nameservers 8.8.8.8
    slaves enp7sf0 enp7sf1 # два интерфейса  
    bond_mode balance-tlb  # mode=5
	bond_miimon 100		   # Polling interval, ms
	bond_downdelay 200	   # Down delay, ms
	bond_updelay 200	   # Up delay, ms

```
> ..далее перезапускаем интерфейсы для применения конфига
```bash
> sudo ifdown eth0 eth1
> sudo ifup bond0
> sudo /etc/init.d/networking restart

```

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

> /29 - 11111111.11111111.11111111.11111000 : 255.255.255.248 = 8 адресов
>
> в сети с маской /24 можно получить 32 (=256/8) подсети /29
>
> примеры подсетей /29 в сети 10.10.10.0/24: `10.10.10.8/29`, `10.10.10.24/29`, 


6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.
> 10.0.0.0/8: 10.0.0.0 .. 10.255.255.255 
>
> 172.16.0.0/12: 172.16.0.0 .. 172.31.255.255
>
> 192.168.0.0/16: 192.168.0.0 .. 192.168.255.255
>
> Для организации стыка между двумя организациями можно попытаться настроить на сетях 100.64.0.0/10, защитив ее от проникновения в интернет. Эту сеть использую провайдеры для своего оборудования. 
>
> Сеть для организации стыка - 100.127.255.200/26 (100.127.255.192 .. 100.127.255.255)
>


7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?
> Посмотреть ARP таблицу в Linux, Windows можно командой `arp -a`
>
> Очиcтить ARP таблицу в Windows можно командой `arp -d`, в Linux очистить таблицу можно скриптом `...while ... arp -d $IP....`
>
> Удалить один нужный IP можно командой `arp -d IP`
> 

 ---
## Задание для самостоятельной отработки (необязательно к выполнению)

 8*. Установите эмулятор EVE-ng.
 
 Инструкция по установке - https://github.com/svmyasnikov/eve-ng

 Выполните задания на lldp, vlan, bonding в эмуляторе EVE-ng. 
 
 ---


[На главную](../README.md)